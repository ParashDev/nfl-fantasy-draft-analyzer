# NFL Fantasy Draft Analyzer

Data-driven fantasy football draft recommendations powered by nflverse stats and Sleeper API. Auto-detects the current NFL season, runs a full ETL pipeline, and deploys an interactive dashboard to GitHub Pages via GitHub Actions. Features position rankings, auction values, ADP analysis, sleeper picks, and a mock draft simulator.

[Live Dashboard](https://parashdev.github.io/nfl-fantasy-draft-analyzer/) | [Data Sources](#data-sources)

## The Question

I wanted to build a system that takes the guesswork out of fantasy football drafts. Instead of relying on "expert" rankings that change weekly, I wanted raw stats to drive the recommendations: who actually performed, how consistently, and where the real value lies in a draft.

## Features

- **Position Rankings** -- Top picks and 10 additional recommendations per position (QB, RB, WR, TE, K, DEF) across three scoring formats
- **Auction Draft Values** -- Value-over-replacement dollar values for $200-budget auctions
- **ADP Comparison** -- Steals and reaches based on Sleeper ADP vs actual fantasy performance
- **Sleeper Picks** -- Under-the-radar players with breakout potential based on underlying metrics
- **Mock Draft Simulator** -- 6-team snake draft against AI opponents with ADP-based drafting logic
- **Weekly Trends** -- Consistency charts and positional performance over the season
- **Auto Season Detection** -- No manual config changes needed; pipeline detects the current NFL season automatically

## How It Works

The pipeline auto-detects which season to analyze using two data sources:

1. **Sleeper API** (`/v1/state/nfl`) -- determines what phase the NFL is in (regular season, playoffs, offseason)
2. **nflverse** -- verifies that season data is actually published and available

| NFL Phase | Mode | Behavior |
|---|---|---|
| Regular season / Playoffs | `live` | Re-downloads fresh stats every run |
| Offseason / Preseason | `static` | Caches data locally, no re-downloads |

When nflverse publishes new season data, the pipeline picks it up automatically on the next run.

## Project Structure

```
nfl-fantasy-draft-analyzer/
  .github/workflows/
    update-data.yml              # GitHub Actions: weekly pipeline + Pages deploy
  scripts/
    config.py                    # Auto-detect season, scoring, draft settings
    01_clean.py                  # Download + clean NFL stats via nfl_data_py
    02_transform.py              # Calculate fantasy points, rankings, build JSON
    03_fetch_adp.py              # Optional: fetch ADP + player data from Sleeper API
  data/
    raw/                         # Cached raw downloads (git-ignored)
    cleaned/                     # Cleaned CSVs (git-ignored)
    dashboard_data.json          # Dashboard input (git-ignored, generated by pipeline)
  docs/
    cleaning-log.md              # Every cleaning decision documented
    pipeline.md                  # Architecture and script documentation
  index.html                     # Single-file dashboard (Tailwind + Chart.js)
  requirements.txt               # Python dependencies
```

## Run Locally

Prerequisites: Python 3.11+, pip

```bash
git clone https://github.com/ParashDev/nfl-fantasy-draft-analyzer.git
cd nfl-fantasy-draft-analyzer
pip install -r requirements.txt

python scripts/01_clean.py
python scripts/03_fetch_adp.py    # Optional enrichment
python scripts/02_transform.py

python -m http.server 8000
# Open http://localhost:8000
```

## Power BI Integration

The pipeline includes a Power BI export script that generates flat, denormalized CSVs ready for import into Power BI Desktop:

```bash
python scripts/04_export_powerbi.py
# Outputs 9 CSVs to data/powerbi/
```

Exports a star schema data model:
- **Fact tables:** Players (77 ranked), auction values (50), ADP comparison (20), sleepers (60), draft pool (252), weekly trends (18 weeks)
- **Dimension tables:** Positions (with colors and scarcity tiers), scoring formats (3), season metadata

Import the CSVs into Power BI Desktop and connect via the suggested relationships printed by the script.

## Automated Deployment

The GitHub Actions workflow handles everything automatically:

- **Weekly** (Wednesday 6 AM UTC) -- runs the full pipeline and deploys to GitHub Pages
- **On push** -- rebuilds when scripts or index.html change
- **Manual trigger** -- run from the Actions tab with optional season/mode overrides

No manual config changes needed between seasons. To force a specific season:

```bash
# Environment variable overrides
NFL_SEASON_YEAR=2024 NFL_MODE=static python scripts/01_clean.py
```

Or use the GitHub Actions manual trigger with the override fields.

## Data Sources

| Source | Format | What It Provides |
|---|---|---|
| nflverse (via nfl_data_py) | CSV/DataFrame | Seasonal stats, weekly stats, play-by-play, roster data |
| Sleeper API | JSON | Player metadata, ADP estimates, injury status, season state |

## Scoring Formats

- **Standard** -- No points for receptions
- **Half PPR** -- 0.5 points per reception (default)
- **Full PPR** -- 1 point per reception

## What This Demonstrates

| Skill | How |
|---|---|
| Data Engineering | Config-driven ETL pipeline with auto season detection, static/live modes, graceful degradation |
| Data Cleansing | Normalizing multi-source NFL data across seasonal and weekly granularities |
| Fantasy Analytics | Custom scoring calculations, consistency metrics, positional scarcity, VOR auction values |
| Visualization | Interactive single-file dashboard with Chart.js, responsive design, mock draft simulator |
| CI/CD | GitHub Actions pipeline with caching, scheduled runs, and automated GitHub Pages deployment |

## License

NFL data provided by nflverse under MIT license. ADP data from Sleeper API (public, no auth required). Analysis and code are MIT.
